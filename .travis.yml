language: python
python:
- '2.7'
env:
- CKANVERSION=master
- CKANVERSION=2.8
install:
- bash bin/travis-build.bash
services: "-postgresql"
script: sh bin/travis-run.sh
after_success: coveralls
sudo: required
matrix:
  include:
  - name: Flake8 on Python 2.7
    dist: xenial
    cache: pip
    install: pip install flake8
    script:
    - flake8 --version
    - flake8 . --count --max-complexity=14 --max-line-length=127 --statistics --exclude
      ckan,{{ project }}
    python: '2.7'
    env:
    - FLAKE8=true
    - CKANVERSION=master
notifications:
  slack:
    rooms:
      secure: sXgLs+IvJsI27V5YwZfAPYcYjwgOq1Mz03vkin61tPkaleSntLjgW/yHqydKDtCWTewbnwlYldx297X8+ISAcJhwFjq5xOeti41PpCn69pB/G6PEHlagmKUKvC0RP4d4dAA2MQBZHGIOmq/FbKriC+nLO5Fjaar7z51Cbl+54DEFRAgCHoshLfqAiX6uy0NUSJv/sIFrQweCLNkvJjBUiSiZpHsLtr8pLugf6A4hYP4ccUDnwxWHARgoZ6yidYm9I+Ya2ap8LZC57ke66KsiSTbSdwLeRgcrKKD5BA2ujIb+U5Fovmk8LGz0Ys8iORGRbzqf/bExp1nRvOSpFM5px9Wv1h+XDpKWI7Gxl5XfZKnNtsgWHMcXsJRwG8BjlGoccOtnecKvw2EpmUoQAZ+fdy+8O69hJ1byGoTvt0GP6NNH8K8ToUNaWOBNT0+vHZqOffKmlM9sMxJMZp3Y6AdSwQKkit0YjBMDarvJntdR5mSK9SbeENqN1X86zkw4dPYGpJAN7vGBpIMA8HLc7YJNs/hMDx0Q0B7/B3aA6vXe7wW9RkaTi6aOPxarPYE1NgyanGfSsIlEVp5U6zhWvqWRML7kOBWLoXcvkWR+17ChvgTTacArM9ZPE5CcvG2hhqRJqnzjg2xYIuqk2dwePwruDZbV4zjAk7bHEFIydUHH9X8=
    on_success: change
    on_failure: always
    on_pull_requests: false
  email:
    on_success: never
    on_failure: never
