language: python
python:
- '2.7'
env:
- CKANVERSION=master
- CKANVERSION=2.8
install:
- bash bin/travis-build.bash
services: "-postgresql"
script: sh bin/travis-run.sh
after_success: coveralls
sudo: required
matrix:
  include:
  - name: Flake8 on Python 2.7
    dist: xenial
    cache: pip
    install: pip install flake8
    script:
    - flake8 --version
    - flake8 . --count --max-complexity=14 --max-line-length=127 --statistics --exclude
      ckan,{{ project }}
    python: '2.7'
    env:
    - FLAKE8=true
    - CKANVERSION=master
notifications:
  slack:
    rooms:
      secure: FFPSeBLMLXQjta6tKhBExupJkRb4qB1Rb0XCYF9a+jjXIKFFzO14cRCSD2Ss8gajVMBAyYSJALxZy/9cnZyDbjcKK5xMJx8FTf+BzbgthlEuL6uvtNNfivwLvvexvjLORkuBHPJ+JaTxpF1ZnNWPGtXTd8i3Xe7vESv1D4t+Ha/9XjLHB4DcJCCmUiiOYeygyKILhJxGqrexlwwg2B6FFY308ByuEHdenLbkXjsnC19qUdLTbmUNfoIOLIqwi9QDrQdqTHf4u+RuaqUQUIo87onMypqBKVng3Zh06aC+cn6Th+k7mN5JsGGlqPlZRIt88Bsy/If02lXE5wWNWv5l2z53AsqIowZSTXdlmwFmR2fN+yQzwM5R3wTOC/M0YSfs6k2GvebO9vL7W5W28igyD54jno0nwrOfXua1C/222r2drmKDQ3FL2UWr6gx9rUyFgsubiId4HhYOUPh8zmTi18hPhWBmaf/tNjvcTztEBntKy8aUEI4Yptzmroszn5zZBw0Nms+WGKsMlAnRzKVtYRlfoOa7Ge0eoQt9CoVMnjg+emR0vSaiOXbm3xXLV350rKiDOeyMA8Hrr4kW40G240Z29jjNKaFc/3HhdEmTJozY9ietEdQnqw7ymig5NrZNYUeMh0GJ6ZwkcyxfGqy2t/2u/DFogfn2rSwfWjlx2Tw=
    on_success: change
    on_failure: always
    on_pull_requests: false
  email:
    on_success: never
    on_failure: never
