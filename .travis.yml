language: python
python:
- '2.7'
env:
- CKANVERSION=master
- CKANVERSION=2.8
install:
- bash bin/travis-build.bash
services: "-postgresql"
script: sh bin/travis-run.sh
after_success: coveralls
sudo: required
matrix:
  include:
  - name: Flake8 on Python 2.7
    dist: xenial
    cache: pip
    install: pip install flake8
    script:
    - flake8 --version
    - flake8 . --count --max-complexity=14 --max-line-length=127 --statistics --exclude
      ckan,{{ project }}
    python: '2.7'
    env:
    - FLAKE8=true
    - CKANVERSION=master
notifications:
  slack:
    rooms:
      secure: J2/OAvFomS8nf5MlS7bOPruvXei9tuoc7/m22tD1bVDPHKj7Nxioa7ZkE80c5u09PyNPsUqDo5+kyb0Yd8BxsxPjg+kTxpdak09i8eNKE7CofRG+hL1/F5uoyr9vdEiJN6yvuzZ1EMAHrIwRiS8IoxYfwsiv1YjXsWgZNv9SbuG8TB8bAg7UZjyDLA/wz63A7eaU8G9yyHNon4tJPcU90WRTEjU/NYpPxdyu9Va2QZxL2ekNoy/iCo8y8c4t5BMJsBEcM/C5gnKkXhZc5Q28P8MXhHmbypgv64J972gqo15QmLe7xyZCNylsv0ytf8NQ3X6RdK+y10iB/uSVCiwCORLpHUY57YeXygiEIAVdLLcn77bPYjJycwLdAyKclIJUpGaycE4As4OOnC3ydsXgy7cdYZrTmppyMteqxz0PHA6iaSiBRUyXIknH72Ljb1NVuoWgDXs1t1LoIWMR7OCpqL096l8n+m0BpvbJ5WrSPxdxR1m7EHWFsTCldRsPG3mLmqTwtajcMHsZLpX6qmj0+gaXSuxa3E2kszuIJ4p+onT/AB50cbomOge7B8Yf4SUcToGJQb7FQOoYLef6GhAQWSXD5eORZWDgjh30D46CPS+f6GoWfkqXDOAnEHvMeU1rbsEyhPPWIvBQOoMra/ZPWehr7CTSfx1xlPtw95FANrw=
    on_success: change
    on_failure: always
    on_pull_requests: false
  email:
    on_success: never
    on_failure: never
